(()=>{"use strict";var e={759:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81),o=t.n(i),r=t(645),a=t.n(r)()(o());a.push([e.id,".keyboard-gain-control {\n  background: #555;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.gain-control-indicator {\n  flex: 1;\n  padding: 2px;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: flex-end;\n  justify-content: flex-start;\n  outline: 2px solid #000;\n}\n\n.gain-bar {\n  width: 6px;\n  margin: 0 1px;\n  background: #444;\n}\n\n.filled {\n  background: #000;\n}\n\n.gain-buttons-container {\n  min-width: 30px;\n  line-height: 10px;\n  font-size: 1.2rem;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  cursor: pointer;\n  margin-left: 2px;\n}\n\n.gain-btn {\n  flex: 1;\n  color: #999;\n  background: #383838;\n  text-align: center;\n  padding: 4px 10px;\n  border-bottom: 2px solid #000;\n}",""]);const s=a},44:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81),o=t.n(i),r=t(645),a=t.n(r)()(o());a.push([e.id,".keyboard-control-note-duration {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.note-duration-indicator {\n  background: #555;\n  min-width: 33px;\n  padding: 4px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #111;\n}\n\n.note-duration-buttons-container {\n  line-height: 10px;\n  font-size: 1.2rem;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  cursor: pointer;\n}\n\n.note-duration-button {\n  flex: 1;\n  color: #999;\n  background: #383838;\n  padding: 4px 10px;\n  border-bottom: 2px solid #000;\n  text-align: center;\n}",""]);const s=a},588:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81),o=t.n(i),r=t(645),a=t.n(r)()(o());a.push([e.id,".keyboard-controls-oscillator-type {\n  position: relative;\n  flex: 100px 0 0;\n  height: 30px;\n  background: #444;\n  border: 2px solid #000;\n}\n\n.oscillator-type-indicator {\n  position: absolute;\n  top: 10px;\n  left: 20%;\n  margin-left: -6px;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 12px solid #999;\n}",""]);const s=a},495:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81),o=t.n(i),r=t(645),a=t.n(r)()(o());a.push([e.id,".keyboard-outer {\n  flex: 1 1 100%;\n  background: #222;\n  display: flex;\n  flex-flow: column nowrap;\n  border-bottom: 1rem solid #111;\n  padding: 0 0 1rem 0;\n}\n\n.keyboard-body-container {\n  flex-basis: 70%;\n  display: flex;\n}\n\n.keyboard-speaker {\n  flex: 1 1 10%;\n  margin: 0 1rem;\n  background: repeating-linear-gradient(\n    -45deg,\n    rgba(0,0,0,0.1),\n    rgba(0,0,0,0.1) 3px,\n    rgba(0,0,0,0.4) 3px,\n    rgba(0,0,0,0.4) 6px\n  );\n  border: 1px solid rgba(0,0,0,0.4);\n}\n\n.keyboard {\n  max-width: 1000px;\n  flex: 1 1 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n  box-sizing: border-box;\n}\n\n.keyboard-controls-container {\n  padding: 1rem;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-around;\n}\n\n.keyboard-keys-container {\n  border-top: 0.6rem solid #111;\n  position: relative;\n  flex: 1 1 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.keyboard-key {\n  border-bottom: 0.5rem solid rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n}\n\n.pressed {\n  border-bottom: 0.2rem solid rgba(0, 0, 0, 0.4);\n}\n\n.major-key {\n  flex: 1 1 20px;\n  background: #ccc;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.minor-keys-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 65%;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  pointer-events: none;\n}\n\n.minor-key-group {\n  flex: 1;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.minor-key {\n  flex: 10% 0 0;\n  background: #353535;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  pointer-events: all;\n}\n\n.hidden {\n  opacity: 0;\n  pointer-events: none;\n}\n",""]);const s=a},28:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81),o=t.n(i),r=t(645),a=t.n(r)()(o());a.push([e.id,"html,\nbody {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-family: 'Source Sans Pro', 'Arial', sans-serif;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  background: #1abc9c;\n}\n\n.room-viewer {\n  flex: 2 0 0;\n  display: flex;\n}\n\ncanvas {\n  flex: 1 1 1;\n}\n\n.instrument-viewer {\n  background: #111;\n  flex: 1 0 0;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n}\n",""]);const s=a},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",i=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),i&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),i&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,i,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(a[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);i&&a[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),n.push(c))}},n}},81:e=>{e.exports=function(e){return e[1]}},66:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});const i=t.p+"index.html"},379:e=>{var n=[];function t(e){for(var t=-1,i=0;i<n.length;i++)if(n[i].identifier===e){t=i;break}return t}function i(e,i){for(var r={},a=[],s=0;s<e.length;s++){var d=e[s],l=i.base?d[0]+i.base:d[0],c=r[l]||0,h="".concat(l," ").concat(c);r[l]=c+1;var u=t(h),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)n[u].references++,n[u].updater(p);else{var y=o(p,i);i.byIndex=s,n.splice(s,0,{identifier:h,updater:y,references:1})}a.push(h)}return a}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=t(r[a]);n[s].references--}for(var d=i(e,o),l=0;l<r.length;l++){var c=t(r[l]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}r=d}}},569:e=>{var n={};e.exports=function(e,t){var i=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,o&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(i,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(i){var o=n[i];if(void 0!==o)return o.exports;var r=n[i]={id:i,exports:{}};return e[i](r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/",t.nc=void 0,(()=>{var e=t(379),n=t.n(e),i=t(795),o=t.n(i),r=t(569),a=t.n(r),s=t(565),d=t.n(s),l=t(216),c=t.n(l),h=t(589),u=t.n(h),p=t(28),y={};y.styleTagTransform=u(),y.setAttributes=d(),y.insert=a().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=c(),n()(p.Z,y),p.Z&&p.Z.locals&&p.Z.locals;var f=t(495),m={};m.styleTagTransform=u(),m.setAttributes=d(),m.insert=a().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=c(),n()(f.Z,m),f.Z&&f.Z.locals&&f.Z.locals;const g={C:[16.35,32.7,65.41,130.8,261.6,523.3,1047,2093,4186],"C#":[17.32,34.65,69.3,138.6,277.2,554.4,1109,2217,4435],D:[18.35,36.71,73.42,146.8,293.7,587.3,1175,2349,4699],Eb:[19.45,38.89,77.78,155.6,311.1,622.3,1245,2489,4978],E:[20.6,41.2,82.41,164.8,329.6,659.3,1319,2637,5274],F:[21.83,43.65,87.31,174.6,349.2,698.5,1397,2794,5588],"F#":[23.12,46.25,92.5,185,370,740,1480,2960,5920],G:[24.5,49,98,196,392,784,1568,3136,6272],"G#":[25.96,51.91,103.8,207.7,415.3,830.6,1661,3322,6645],A:[27.5,55,110,220,440,880,1760,3520,7040],Bb:[29.14,58.27,116.5,233.1,466.2,932.3,1865,3729,7459],B:[30.87,61.74,123.5,246.9,493.9,987.8,1976,3951,7902]};var b,v=t(588),x={};x.styleTagTransform=u(),x.setAttributes=d(),x.insert=a().bind(null,"head"),x.domAPI=o(),x.insertStyleElement=c(),n()(v.Z,x),v.Z&&v.Z.locals&&v.Z.locals,function(e){e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAWTOOTH="sawtooth"}(b||(b={}));const E=function(){function e(e,n){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-controls-oscillator-type",this.parentElement.appendChild(this.bodyElement),this.oscillatorTypes=Object.values(b),this.selectedOscillator=0,this.onOscillatorTypeChanged=n}return e.prototype.render=function(){var e=this,n=document.createElement("div");n.className="oscillator-type-indicator",this.bodyElement.appendChild(n),this.bodyElement.addEventListener("pointerdown",(function(){e.changeOscillatorType(),n.style.left=20*e.selectedOscillator+20+"%"}))},e.prototype.changeOscillatorType=function(){this.selectedOscillator+=1,this.selectedOscillator>3&&(this.selectedOscillator=0),this.onOscillatorTypeChanged(this.oscillatorTypes[this.selectedOscillator])},e}();var w=t(759),k={};k.styleTagTransform=u(),k.setAttributes=d(),k.insert=a().bind(null,"head"),k.domAPI=o(),k.insertStyleElement=c(),n()(w.Z,k),w.Z&&w.Z.locals&&w.Z.locals;const C=function(){function e(e,n,t){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-gain-control",this.parentElement.appendChild(this.bodyElement),this.onGainChanged=t,this.gain=n,this.maxGain=.1}return e.prototype.render=function(){var e=this,n=document.createElement("div");n.className="gain-control-indicator",this.bodyElement.appendChild(n),this.renderGainBars(n);var t=document.createElement("div");t.className="gain-buttons-container",this.bodyElement.appendChild(t);var i=document.createElement("div");i.className="gain-btn",t.appendChild(i),i.textContent="+",i.addEventListener("pointerdown",(function(){e.increaseGain(),e.renderGainBars(n)}));var o=document.createElement("div");o.className="gain-btn",t.appendChild(o),o.textContent="-",o.addEventListener("pointerdown",(function(){e.decreaseGain(),e.renderGainBars(n)}))},e.prototype.renderGainBars=function(e){e.innerHTML="";for(var n=Math.round(this.gain/this.maxGain*100),t=10;t<=100;t+=10){var i=document.createElement("div"),o=t<=n?" filled":"";i.className="gain-bar"+o,i.style.height=t+"%",e.appendChild(i)}},e.prototype.increaseGain=function(){this.gain<this.maxGain&&(this.gain=this.gain+this.maxGain/10,this.onGainChanged(this.gain))},e.prototype.decreaseGain=function(){this.gain>0&&(this.gain=this.gain-this.maxGain/10,this.onGainChanged(this.gain))},e}();var N=t(44),T={};T.styleTagTransform=u(),T.setAttributes=d(),T.insert=a().bind(null,"head"),T.domAPI=o(),T.insertStyleElement=c(),n()(N.Z,T),N.Z&&N.Z.locals&&N.Z.locals;const D=function(){function e(e,n,t){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-control-note-duration",this.parentElement.appendChild(this.bodyElement),this.onNoteDurationChanged=t,this.noteDuration=n}return e.prototype.render=function(){var e=this,n=document.createElement("div");n.className="note-duration-indicator",this.bodyElement.appendChild(n),n.textContent=this.noteDuration.toString();var t=document.createElement("div");t.className="note-duration-buttons-container",this.bodyElement.appendChild(t);var i=document.createElement("div");i.className="note-duration-button",t.appendChild(i),i.textContent="+",i.addEventListener("pointerdown",(function(){e.increaseNoteDuration(),n.textContent=e.noteDuration.toString()}));var o=document.createElement("div");o.className="note-duration-button",t.appendChild(o),o.textContent="-",o.addEventListener("pointerdown",(function(){e.decreaseNoteDuration(),n.textContent=e.noteDuration.toString()}))},e.prototype.increaseNoteDuration=function(){this.noteDuration<100&&(this.noteDuration+=1,this.onNoteDurationChanged(this.noteDuration))},e.prototype.decreaseNoteDuration=function(){this.noteDuration>0&&(this.noteDuration-=1,this.onNoteDurationChanged(this.noteDuration))},e}(),A=function(){function e(e,n,t,i,o,r,a,s,d,l){var c=this;this.changeOscillatorType=function(e){c.oscillatorType=e},this.changeGain=function(e){c.gain=e},this.changeFadeDuration=function(e){c.fadeDuration=e},this.context=e,this.audioAnalyser=n,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-key "+l,this.fadeDuration=s,this.frequency=a,this.oscillatorType=d,this.gain=i,this.note=o,this.octave=r,this.isPressed=!1,this.gainNode=null,this.oscillator=null,t.appendChild(this.bodyElement),this.addEventListeners()}return e.prototype.addEventListeners=function(){var e=this;this.bodyElement.addEventListener("pointerdown",(function(){e.press()})),this.bodyElement.addEventListener("pointerover",(function(n){"mouse"===n.pointerType?1===n.buttons&&e.press():e.press()})),this.bodyElement.addEventListener("pointerup",(function(){e.release()})),this.bodyElement.addEventListener("pointerleave",(function(){e.release()}))},e.prototype.press=function(){this.isPressed||(this.isPressed=!0,this.bodyElement.classList.add("pressed"),this.playNote())},e.prototype.release=function(){this.isPressed&&(this.bodyElement.classList.remove("pressed"),this.isPressed=!1),this.gainNode&&(this.gainNode.gain.value=this.gain,this.gainNode.gain.exponentialRampToValueAtTime(1e-5,this.context.currentTime+this.fadeDuration),this.gainNode=null),this.oscillator&&(this.oscillator.stop(this.context.currentTime+this.fadeDuration+.03),this.oscillator=null)},e.prototype.playNote=function(){this.gainNode=this.context.createGain(),this.gainNode.gain.value=this.gain;var e=this.context.createDynamicsCompressor();this.oscillator=this.context.createOscillator(),this.oscillator.type=this.oscillatorType,this.oscillator.frequency.value=this.frequency,this.oscillator.connect(this.gainNode).connect(e).connect(this.audioAnalyser).connect(this.context.destination),this.oscillator.start(this.context.currentTime)},e}();function S(e,n,t,i,o){return(e-n)*(o-i)/(t-n)+i}function G(e,n,t){var i=document.createElement(n);return i.className=t,e.appendChild(i),i}const L=function(){function e(e,n,t){var i=this;this.onOscillatorTypeChanged=function(e){i.keyboardKeys.forEach((function(n){n.changeOscillatorType(e)}))},this.onGainChanged=function(e){i.keyboardKeys.forEach((function(n){n.changeGain(e)}))},this.onFadeDurationChanged=function(e){i.keyboardKeys.forEach((function(n){n.changeFadeDuration(e)}))},this.context=e,this.parentElement=n,this.oscillatorType=b.SINE,this.gain=.05,this.noteDuration=5,this.audioAnalyser=t;var o=G(this.parentElement,"div","keyboard-outer");this.controlsContainer=G(o,"div","keyboard-controls-container");var r=G(o,"div","keyboard-body-container");G(r,"div","keyboard-speaker"),this.bodyElement=G(r,"div","keyboard"),G(r,"div","keyboard-speaker"),this.width=this.bodyElement.offsetWidth-.2*this.bodyElement.offsetWidth,this.octaves=[3],this.width>600?this.octaves=[3,4,5]:this.width>400&&(this.octaves=[4,5]),this.majorNotes=["C","D","E","F","G","A","B"],this.minorNotes=["C#","Eb","F#","G#","Bb"],this.keyboardKeys=[],this.addKeyListeners()}return e.prototype.render=function(){this.renderControls(),this.renderKeyboard()},e.prototype.renderControls=function(){new E(this.controlsContainer,this.onOscillatorTypeChanged).render(),new C(this.controlsContainer,this.gain,this.onGainChanged).render(),new D(this.controlsContainer,this.noteDuration,this.onFadeDurationChanged).render()},e.prototype.renderKeyboard=function(){var e=document.createElement("div");e.className="keyboard-keys-container",this.bodyElement.appendChild(e);for(var n=0,t=0,i=this.octaves;t<i.length;t++)for(var o=i[t],r=0,a=this.majorNotes;r<a.length;r++){var s=a[r],d=new A(this.context,this.audioAnalyser,e,this.gain,s,o,g[s][o],this.noteDuration,this.oscillatorType,"major-key");this.keyboardKeys.push(d),n=d.bodyElement.offsetWidth}var l=document.createElement("div");l.className="minor-keys-container",e.appendChild(l);for(var c=[],h=0,u=this.octaves;h<u.length;h++){o=u[h];var p=1,y=document.createElement("div");y.className="minor-key-group",l.appendChild(y);for(var f=0,m=this.minorNotes;f<m.length;f++){if(s=m[f],d=new A(this.context,this.audioAnalyser,y,this.gain,s,o,g[s][o],this.noteDuration,this.oscillatorType,"minor-key"),this.keyboardKeys.push(d),2==p){var b=document.createElement("div");b.className="minor-key hidden",y.appendChild(b)}p+=1,c.push(y)}}c.forEach((function(e){var t=.1*e.offsetWidth,i=n-.32*t;e.style.padding="0 "+i+"px"}))},e.prototype.addKeyListeners=function(){var e=this,n=[{note:"C",keyboardKey:"s"},{note:"C#",keyboardKey:"e"},{note:"D",keyboardKey:"d"},{note:"Eb",keyboardKey:"r"},{note:"E",keyboardKey:"f"},{note:"F",keyboardKey:"g"},{note:"F#",keyboardKey:"y"},{note:"G",keyboardKey:"h"},{note:"G#",keyboardKey:"u"},{note:"A",keyboardKey:"j"},{note:"Bb",keyboardKey:"i"},{note:"B",keyboardKey:"k"}];window.addEventListener("keydown",(function(t){n.forEach((function(n){n.keyboardKey!==t.key||e.keyboardKeys.forEach((function(e){e.note===n.note&&4===e.octave&&e.press()}))}))})),window.addEventListener("keyup",(function(t){n.forEach((function(n){n.keyboardKey!==t.key||e.keyboardKeys.forEach((function(e){e.note===n.note&&4===e.octave&&e.release()}))}))}))},e}(),K=function(){function e(e,n,t){this.ctx=n,this.audioAnalyser=t,this.frequencyDataArray=new Uint8Array(1024),this.sampleSize=64,this.width=e.clientWidth,this.height=e.clientHeight,this.spacingX=this.width/1024,this.historyLength=150,this.timeOffset=3,this.spacingY=(this.height-40)/(this.historyLength-1),this.timeDataArrayHistory=[]}return e.prototype.render=function(){var e=this;this.audioAnalyser.getByteFrequencyData(this.frequencyDataArray);var n=this.frequencyDataArray.slice(0,this.sampleSize);this.timeDataArrayHistory.length>=this.historyLength&&this.timeDataArrayHistory.pop(),this.timeDataArrayHistory.unshift(Array.from(n));for(var t=0,i=function(n){var i=0,r=(o.width-2*t)/o.sampleSize,a=[];o.timeDataArrayHistory[n].forEach((function(o,s){i+=o;var d=S(n,0,e.historyLength,140,5),l=S(o,0,256,0,d);a.push({x:t+s*r,y:e.height-20-n*e.spacingY-l})}));var s=S(i,0,500,0,1);o.ctx.strokeStyle="rgba(20,20,20,".concat(s,")"),function(e,n){e.moveTo(n[0].x,n[0].y),e.beginPath();for(var t=1;t<n.length-2;t++){var i=(n[t].x+n[t+1].x)/2,o=(n[t].y+n[t+1].y)/2;e.quadraticCurveTo(n[t].x,n[t].y,i,o)}e.quadraticCurveTo(n[n.length-2].x,n[n.length-2].y,n[n.length-1].x,n[n.length-1].y),e.stroke(),e.closePath()}(o.ctx,a),t+=10},o=this,r=0;r<this.timeDataArrayHistory.length;r+=this.timeOffset)i(r)},e}(),O=function(){function e(e,n,t){n.canvas.width=e.clientWidth,n.canvas.height=e.clientHeight,this.visualiser=new K(e,n,t)}return e.prototype.render=function(){this.visualiser.render()},e}();t(66),window.addEventListener("load",(function(){var e=document.body,n=document.createElement("div");n.className="room-viewer",e.appendChild(n);var t=document.createElement("canvas");n.appendChild(t);var i=t.getContext("2d"),o=document.createElement("div");o.className="instrument-viewer",e.appendChild(o);var r=new AudioContext,a=r.createAnalyser();a.connect(r.destination),new L(r,o,a).render();var s=new O(n,i,a);setInterval((function(){i.clearRect(0,0,t.width,t.height),s.render()}),1e3/60)}))})()})();