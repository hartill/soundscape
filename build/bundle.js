(()=>{"use strict";var e={188:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,"#play-dialog-milk {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n}\n\n#play-dialog {\n  font-size: 1.2rem;\n  flex: 0 1 660px;\n  background: #fff;\n  padding: 1.5rem;\n  overflow: hidden;\n  z-index: 1;\n  border: 4px solid #333;\n  border-radius: 20px;\n  box-shadow: 0 0 0 3px #fff;\n}",""]);const r=s},759:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,".keyboard-gain-control {\n  background: #555;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.gain-control-indicator {\n  flex: 1;\n  padding: 2px;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: flex-end;\n  justify-content: flex-start;\n  outline: 2px solid #000;\n}\n\n.gain-bar {\n  width: 6px;\n  margin: 0 1px;\n  background: #444;\n}\n\n.filled {\n  background: #000;\n}\n\n.gain-buttons-container {\n  min-width: 30px;\n  line-height: 10px;\n  font-size: 1.2rem;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  cursor: pointer;\n  margin-left: 2px;\n}\n\n.gain-btn {\n  flex: 1;\n  color: #999;\n  background: #383838;\n  text-align: center;\n  padding: 4px 10px;\n  border-bottom: 2px solid #000;\n}",""]);const r=s},44:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,".keyboard-control-note-duration {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.note-duration-indicator {\n  background: #555;\n  min-width: 33px;\n  padding: 4px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #111;\n}\n\n.note-duration-buttons-container {\n  line-height: 10px;\n  font-size: 1.2rem;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  cursor: pointer;\n}\n\n.note-duration-button {\n  flex: 1;\n  color: #999;\n  background: #383838;\n  padding: 4px 10px;\n  border-bottom: 2px solid #000;\n  text-align: center;\n}",""]);const r=s},588:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,".keyboard-controls-oscillator-type {\n  position: relative;\n  flex: 100px 0 0;\n  height: 40px;\n  background: #444;\n  border: 2px solid #000;\n}\n\n.oscillator-type-indicator {\n  position: absolute;\n  bottom: 7px;\n  left: 20%;\n  margin-left: -6px;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 12px solid #999;\n}\n\n.oscillator-type-icons {\n  padding: 0 12px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n\n.oscillator-type-icon {\n  width: 17px;\n  height: 17px;\n  padding: 2px;\n}",""]);const r=s},495:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,".keyboard-outer {\n  flex: 1 1 100%;\n  background: #222;\n  display: flex;\n  flex-flow: column nowrap;\n  border-bottom: 1rem solid #111;\n  padding: 0 0 1rem 0;\n}\n\n.keyboard-body-container {\n  flex-basis: 70%;\n  display: flex;\n}\n\n.keyboard-speaker {\n  flex: 1 1 10%;\n  margin: 0 1rem;\n  background: repeating-linear-gradient(\n    -45deg,\n    rgba(0,0,0,0.1),\n    rgba(0,0,0,0.1) 3px,\n    rgba(0,0,0,0.4) 3px,\n    rgba(0,0,0,0.4) 6px\n  );\n  border: 1px solid rgba(0,0,0,0.4);\n}\n\n.keyboard {\n  max-width: 1000px;\n  flex: 1 1 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n  box-sizing: border-box;\n}\n\n.keyboard-controls-container {\n  padding: 1rem;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-around;\n}\n\n.keyboard-keys-container {\n  border-top: 0.6rem solid #111;\n  position: relative;\n  flex: 1 1 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n\n.keyboard-key {\n  border-bottom: 0.5rem solid rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n}\n\n.pressed {\n  border-bottom: 0.2rem solid rgba(0, 0, 0, 0.4);\n}\n\n.major-key {\n  flex: 1 1 20px;\n  background: #ccc;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.minor-keys-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 65%;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  pointer-events: none;\n}\n\n.minor-key-group {\n  flex: 1;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.minor-key {\n  flex: 10% 0 0;\n  background: #353535;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  pointer-events: all;\n}\n\n.hidden {\n  opacity: 0;\n  pointer-events: none;\n}\n",""]);const r=s},28:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(81),o=t.n(i),a=t(645),s=t.n(a)()(o());s.push([e.id,"html,\nbody {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-family: 'Source Sans Pro', 'Arial', sans-serif;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  background: #1abc9c;\n  touch-action: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\nli {\n  padding-left: 0.2rem;\n}\n\nul {\n  padding-left: 1rem;\n}\n\n.room-viewer {\n  flex: 2 0 0;\n  display: flex;\n}\n\ncanvas {\n  flex: 1 1 1;\n}\n\n.instrument-viewer {\n  background: #111;\n  flex: 1 0 0;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n}\n",""]);const r=s},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",i=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),i&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),i&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,i,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(s[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);i&&s[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),n.push(c))}},n}},81:e=>{e.exports=function(e){return e[1]}},66:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});const i=t.p+"index.html"},379:e=>{var n=[];function t(e){for(var t=-1,i=0;i<n.length;i++)if(n[i].identifier===e){t=i;break}return t}function i(e,i){for(var a={},s=[],r=0;r<e.length;r++){var l=e[r],d=i.base?l[0]+i.base:l[0],c=a[d]||0,h="".concat(d," ").concat(c);a[d]=c+1;var p=t(h),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var y=o(m,i);i.byIndex=r,n.splice(r,0,{identifier:h,updater:y,references:1})}s.push(h)}return s}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var r=t(a[s]);n[r].references--}for(var l=i(e,o),d=0;d<a.length;d++){var c=t(a[d]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}a=l}}},569:e=>{var n={};e.exports=function(e,t){var i=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,o&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(i,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},465:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNTsiPjxyZWN0IGlkPSJzYXd0b290aCIgeD0iMCIgeT0iMCIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBzdHlsZT0iZmlsbDpub25lOyIvPjxjbGlwUGF0aCBpZD0iX2NsaXAxIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiLz48L2NsaXBQYXRoPjxnIGNsaXAtcGF0aD0idXJsKCNfY2xpcDEpIj48cGF0aCBkPSJNLTUuOTc2LDI2LjAyNGwyMS45NSwtMjAuMDQybDAuMzI0LDIwLjA0MmwyMS45NSwtMjAuMDQyIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDozcHg7Ii8+PC9nPjwvc3ZnPg=="},316:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNTsiPjxyZWN0IGlkPSJzaW5lIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHN0eWxlPSJmaWxsOm5vbmU7Ii8+PGNsaXBQYXRoIGlkPSJfY2xpcDEiPjxyZWN0IGlkPSJzaW5lMSIgc2VyaWY6aWQ9InNpbmUiIHg9IjAiIHk9IjAiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIvPjwvY2xpcFBhdGg+PGcgY2xpcC1wYXRoPSJ1cmwoI19jbGlwMSkiPjxwYXRoIGQ9Ik0tMy43NzUsNi4zNTNjMi43NjMsLTAgNi4wNDYsMTkuMyAxMS40MDYsMTkuM2M1LjM2LDAgNi4wMzcsLTE5LjMgMTEuMzk3LC0xOS4zYzUuMzYxLC0wIDcuMjg0LDE5LjMgMTEuMzcsMTkuM2M0LjA4NiwwIDguNjgzLC0xOS4zIDExLjM5OCwtMTkuMyIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDtzdHJva2Utd2lkdGg6M3B4OyIvPjwvZz48L3N2Zz4="},411:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNTsiPjxyZWN0IGlkPSJzcXVhcmUiIHg9IjAiIHk9IjAiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgc3R5bGU9ImZpbGw6bm9uZTsiLz48Y2xpcFBhdGggaWQ9Il9jbGlwMSI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjX2NsaXAxKSI+PHBhdGggZD0iTS0yLjEzNSw2LjEzN2w5LjIxNCwwbC0wLDE5LjYyNWw5LjIxNCwtMGwtMCwtMTkuNTVsOS4wOTYsLTBsLTAsMTkuNTVsNy44NzgsLTAiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjNweDsiLz48L2c+PC9zdmc+"},197:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNTsiPjxyZWN0IGlkPSJ0cmlhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBzdHlsZT0iZmlsbDpub25lOyIvPjxjbGlwUGF0aCBpZD0iX2NsaXAxIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiLz48L2NsaXBQYXRoPjxnIGNsaXAtcGF0aD0idXJsKCNfY2xpcDEpIj48cGF0aCBkPSJNLTMuNjc3LDUuNjMybDEwLjExMywyMC44NjdsMTAuMTA0LC0yMC44NjdsMTAuMDgsMjAuODY3bDEwLjEwNSwtMjAuODY3IiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDozcHg7Ii8+PC9nPjwvc3ZnPg=="}},n={};function t(i){var o=n[i];if(void 0!==o)return o.exports;var a=n[i]={id:i,exports:{}};return e[i](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/",t.nc=void 0,(()=>{var e=t(379),n=t.n(e),i=t(795),o=t.n(i),a=t(569),s=t.n(a),r=t(565),l=t.n(r),d=t(216),c=t.n(d),h=t(589),p=t.n(h),m=t(28),y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=s().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=c(),n()(m.Z,y),m.Z&&m.Z.locals&&m.Z.locals;var u=t(495),b={};b.styleTagTransform=p(),b.setAttributes=l(),b.insert=s().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=c(),n()(u.Z,b),u.Z&&u.Z.locals&&u.Z.locals;const g={C:[16.35,32.7,65.41,130.8,261.6,523.3,1047,2093,4186],"C#":[17.32,34.65,69.3,138.6,277.2,554.4,1109,2217,4435],D:[18.35,36.71,73.42,146.8,293.7,587.3,1175,2349,4699],Eb:[19.45,38.89,77.78,155.6,311.1,622.3,1245,2489,4978],E:[20.6,41.2,82.41,164.8,329.6,659.3,1319,2637,5274],F:[21.83,43.65,87.31,174.6,349.2,698.5,1397,2794,5588],"F#":[23.12,46.25,92.5,185,370,740,1480,2960,5920],G:[24.5,49,98,196,392,784,1568,3136,6272],"G#":[25.96,51.91,103.8,207.7,415.3,830.6,1661,3322,6645],A:[27.5,55,110,220,440,880,1760,3520,7040],Bb:[29.14,58.27,116.5,233.1,466.2,932.3,1865,3729,7459],B:[30.87,61.74,123.5,246.9,493.9,987.8,1976,3951,7902]};var v=t(588),x={};x.styleTagTransform=p(),x.setAttributes=l(),x.insert=s().bind(null,"head"),x.domAPI=o(),x.insertStyleElement=c(),n()(v.Z,x),v.Z&&v.Z.locals&&v.Z.locals;const f=t(316),I=t(411),w=t(197),Z=t(465);var E;!function(e){e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAWTOOTH="sawtooth"}(E||(E={}));var M=t(759),C={};C.styleTagTransform=p(),C.setAttributes=l(),C.insert=s().bind(null,"head"),C.domAPI=o(),C.insertStyleElement=c(),n()(M.Z,C),M.Z&&M.Z.locals&&M.Z.locals;var N=t(44),j={};j.styleTagTransform=p(),j.setAttributes=l(),j.insert=s().bind(null,"head"),j.domAPI=o(),j.insertStyleElement=c(),n()(N.Z,j),N.Z&&N.Z.locals&&N.Z.locals;const k=class{constructor(e,n,t,i,o,a,s,r){this.changeOscillatorType=e=>{this.oscillatorType=e},this.changeGain=e=>{this.gain=e},this.changeFadeDuration=e=>{this.fadeDuration=e},this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-key "+r,this.fadeDuration=a,this.frequency=o,this.oscillatorType=s,this.gain=n,this.note=t,this.octave=i,this.isPressed=!1,this.gainNode=null,this.oscillator=null,e.appendChild(this.bodyElement)}initialise(e,n){this.audioContext=e,this.audioAnalyser=n,this.addEventListeners()}addEventListeners(){this.bodyElement.addEventListener("pointerdown",(()=>{this.press()})),this.bodyElement.addEventListener("pointerover",(e=>{"mouse"===e.pointerType?1===e.buttons&&this.press():this.press()})),this.bodyElement.addEventListener("pointerup",(()=>{this.release()})),this.bodyElement.addEventListener("pointerleave",(()=>{this.release()}))}press(){this.isPressed||(this.isPressed=!0,this.bodyElement.classList.add("pressed"),this.playNote())}release(){this.isPressed&&(this.bodyElement.classList.remove("pressed"),this.isPressed=!1),this.gainNode&&(this.gainNode.gain.value=this.gain,this.gainNode.gain.exponentialRampToValueAtTime(1e-5,this.audioContext.currentTime+this.fadeDuration),this.gainNode=null),this.oscillator&&(this.oscillator.stop(this.audioContext.currentTime+this.fadeDuration+.03),this.oscillator=null)}playNote(){this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.gain;const e=this.audioContext.createDynamicsCompressor();this.oscillator=this.audioContext.createOscillator(),this.oscillator.type=this.oscillatorType,this.oscillator.frequency.value=this.frequency,this.oscillator.connect(this.gainNode).connect(e).connect(this.audioAnalyser).connect(this.audioContext.destination),this.oscillator.start(this.audioContext.currentTime)}};function L(e,n,t,i,o){return(e-n)*(o-i)/(t-n)+i}function D(e,n,t){const i=document.createElement(n);return i.className=t,e.appendChild(i),i}function T(e,n){e.moveTo(n[0].x,n[0].y),e.beginPath();for(let o=1;o<n.length-2;o++){var t=(n[o].x+n[o+1].x)/2,i=(n[o].y+n[o+1].y)/2;e.quadraticCurveTo(n[o].x,n[o].y,t,i)}e.quadraticCurveTo(n[n.length-2].x,n[n.length-2].y,n[n.length-1].x,n[n.length-1].y),e.stroke(),e.closePath()}class W{constructor(e,n,t){this.ctx=n,this.audioAnalyser=t,this.frequencyDataArray=new Uint8Array(1024),this.sampleSize=64,this.width=e.clientWidth,this.height=e.clientHeight,this.spacingX=this.width/1024,this.historyLength=150,this.timeOffset=3,this.spacingY=(this.height-40)/(this.historyLength-1),this.timeDataArrayHistory=[]}render(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.audioAnalyser.getByteFrequencyData(this.frequencyDataArray);const e=this.frequencyDataArray.slice(0,this.sampleSize);this.timeDataArrayHistory.length>=this.historyLength&&this.timeDataArrayHistory.pop(),this.timeDataArrayHistory.unshift(Array.from(e));let n=0;const t=this.width/150;for(let e=0;e<this.timeDataArrayHistory.length;e+=this.timeOffset){let i=0,o=(this.width-2*n)/this.sampleSize,a=[];this.timeDataArrayHistory[e].forEach(((t,s)=>{i+=t;const r=L(e,0,this.historyLength,140,5),l=L(t,0,256,0,r);a.push({x:n+s*o,y:this.height-20-e*this.spacingY-l})}));const s=L(i,0,500,0,1);this.ctx.strokeStyle=`rgba(20,20,20,${s})`,T(this.ctx,a),n+=t}}}class z{constructor(e,n,t){this.visualiser=new W(e,n,t)}initialise(){requestAnimationFrame(this.update.bind(this))}update(){requestAnimationFrame(this.update.bind(this)),this.visualiser.render()}}var A=t(188),S={};S.styleTagTransform=p(),S.setAttributes=l(),S.insert=s().bind(null,"head"),S.domAPI=o(),S.insertStyleElement=c(),n()(A.Z,S),A.Z&&A.Z.locals&&A.Z.locals;class G{constructor(){}render(e){const n=document.createElement("div");n.id="play-dialog-milk",e.appendChild(n),this.rootElement=n;const t=document.createElement("div");t.id="play-dialog",n.appendChild(t),t.innerHTML="\n      <div>\n        <b>This application plays sounds...</b>\n      </div>\n      <ul>\n        <li>\n          Make sure your device isn't muted\n        </li>\n        <li>\n          Click anywhere to continue\n        </li>\n      </ul>\n    "}destroy(){this.rootElement.remove()}}t(66),window.addEventListener("load",(()=>{let e=!1;document.addEventListener("touchstart",(e=>{e.preventDefault()}),!1);const n=document.createElement("div");n.className="room-viewer",document.body.appendChild(n);const t=document.createElement("canvas");n.appendChild(t);const i=document.createElement("div");i.className="instrument-viewer",document.body.appendChild(i),t.width=n.clientWidth,t.height=n.clientHeight;const o=t.getContext("2d"),a=new class{constructor(e){this.onOscillatorTypeChanged=e=>{this.keyboardKeys.forEach((n=>{n.changeOscillatorType(e)}))},this.onGainChanged=e=>{this.keyboardKeys.forEach((n=>{n.changeGain(e)}))},this.onFadeDurationChanged=e=>{this.keyboardKeys.forEach((n=>{n.changeFadeDuration(e)}))},this.parentElement=e,this.oscillatorType=E.SINE,this.gain=.05,this.noteDuration=5;const n=D(this.parentElement,"div","keyboard-outer");this.controlsContainer=D(n,"div","keyboard-controls-container");const t=D(n,"div","keyboard-body-container");D(t,"div","keyboard-speaker"),this.bodyElement=D(t,"div","keyboard"),D(t,"div","keyboard-speaker")}initialise(e,n){this.audioContext=e,this.audioAnalyser=n,this.keyboardKeys.forEach((e=>{e.initialise(this.audioContext,this.audioAnalyser)})),this.addKeyListeners()}render(e){this.width=.8*e,this.octaves=[3],this.width>660?this.octaves=[3,4,5]:this.width>400&&(this.octaves=[4,5]),this.majorNotes=["C","D","E","F","G","A","B"],this.minorNotes=["C#","Eb","F#","G#","Bb"],this.keyboardKeys=[],this.renderControls(),this.renderKeyboard()}renderControls(){new class{constructor(e,n){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-controls-oscillator-type",this.parentElement.appendChild(this.bodyElement),this.oscillatorTypes=Object.values(E),this.selectedOscillator=0,this.onOscillatorTypeChanged=n}render(){const e=document.createElement("div");e.className="oscillator-type-icons",this.bodyElement.appendChild(e);const n=new Image;n.src=f,n.className="oscillator-type-icon",e.appendChild(n);const t=new Image;t.src=I,t.className="oscillator-type-icon",e.appendChild(t);const i=new Image;i.src=w,i.className="oscillator-type-icon",e.appendChild(i);const o=new Image;o.src=Z,o.className="oscillator-type-icon",e.appendChild(o);const a=document.createElement("div");a.className="oscillator-type-indicator",this.bodyElement.appendChild(a),this.bodyElement.addEventListener("pointerdown",(()=>{this.changeOscillatorType(),a.style.left=20*this.selectedOscillator+20+"%"}))}changeOscillatorType(){this.selectedOscillator+=1,this.selectedOscillator>this.oscillatorTypes.length-1&&(this.selectedOscillator=0),this.onOscillatorTypeChanged(this.oscillatorTypes[this.selectedOscillator])}}(this.controlsContainer,this.onOscillatorTypeChanged).render(),new class{constructor(e,n,t){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-gain-control",this.parentElement.appendChild(this.bodyElement),this.onGainChanged=t,this.gain=n,this.maxGain=.1}render(){const e=document.createElement("div");e.className="gain-control-indicator",this.bodyElement.appendChild(e),this.renderGainBars(e);const n=document.createElement("div");n.className="gain-buttons-container",this.bodyElement.appendChild(n);const t=document.createElement("div");t.className="gain-btn",n.appendChild(t),t.textContent="+",t.addEventListener("pointerdown",(()=>{this.increaseGain(),this.renderGainBars(e)}));const i=document.createElement("div");i.className="gain-btn",n.appendChild(i),i.textContent="-",i.addEventListener("pointerdown",(()=>{this.decreaseGain(),this.renderGainBars(e)}))}renderGainBars(e){e.innerHTML="";const n=Math.round(this.gain/this.maxGain*100);for(let t=10;t<=100;t+=10){const i=document.createElement("div"),o=t<=n?" filled":"";i.className="gain-bar"+o,i.style.height=t+"%",e.appendChild(i)}}increaseGain(){this.gain<this.maxGain&&(this.gain=this.gain+this.maxGain/10,this.onGainChanged(this.gain))}decreaseGain(){this.gain>0&&(this.gain=this.gain-this.maxGain/10,this.onGainChanged(this.gain))}}(this.controlsContainer,this.gain,this.onGainChanged).render(),new class{constructor(e,n,t){this.parentElement=e,this.bodyElement=document.createElement("div"),this.bodyElement.className="keyboard-control-note-duration",this.parentElement.appendChild(this.bodyElement),this.onNoteDurationChanged=t,this.noteDuration=n}render(){const e=document.createElement("div");e.className="note-duration-indicator",this.bodyElement.appendChild(e),e.textContent=this.noteDuration.toString();const n=document.createElement("div");n.className="note-duration-buttons-container",this.bodyElement.appendChild(n);const t=document.createElement("div");t.className="note-duration-button",n.appendChild(t),t.textContent="+",t.addEventListener("pointerdown",(()=>{this.increaseNoteDuration(),e.textContent=this.noteDuration.toString()}));const i=document.createElement("div");i.className="note-duration-button",n.appendChild(i),i.textContent="-",i.addEventListener("pointerdown",(()=>{this.decreaseNoteDuration(),e.textContent=this.noteDuration.toString()}))}increaseNoteDuration(){this.noteDuration<100&&(this.noteDuration+=1,this.onNoteDurationChanged(this.noteDuration))}decreaseNoteDuration(){this.noteDuration>0&&(this.noteDuration-=1,this.onNoteDurationChanged(this.noteDuration))}}(this.controlsContainer,this.noteDuration,this.onFadeDurationChanged).render()}renderKeyboard(){const e=document.createElement("div");e.className="keyboard-keys-container",this.bodyElement.appendChild(e);let n=0;for(const t of this.octaves)for(const i of this.majorNotes){const o=new k(e,this.gain,i,t,g[i][t],this.noteDuration,this.oscillatorType,"major-key");this.keyboardKeys.push(o),n=o.bodyElement.offsetWidth}const t=document.createElement("div");t.className="minor-keys-container",e.appendChild(t);let i=[];for(const e of this.octaves){let n=1;const o=document.createElement("div");o.className="minor-key-group",t.appendChild(o);for(const t of this.minorNotes){const a=new k(o,this.gain,t,e,g[t][e],this.noteDuration,this.oscillatorType,"minor-key");if(this.keyboardKeys.push(a),2==n){const e=document.createElement("div");e.className="minor-key hidden",o.appendChild(e)}n+=1,i.push(o)}}i.forEach((e=>{const t=.1*e.offsetWidth,i=n-.32*t;e.style.padding="0 "+i+"px"}))}addKeyListeners(){const e=[{note:"C",keyboardKey:"s"},{note:"C#",keyboardKey:"e"},{note:"D",keyboardKey:"d"},{note:"Eb",keyboardKey:"r"},{note:"E",keyboardKey:"f"},{note:"F",keyboardKey:"g"},{note:"F#",keyboardKey:"y"},{note:"G",keyboardKey:"h"},{note:"G#",keyboardKey:"u"},{note:"A",keyboardKey:"j"},{note:"Bb",keyboardKey:"i"},{note:"B",keyboardKey:"k"}];window.addEventListener("keydown",(n=>{e.forEach((e=>{e.keyboardKey!==n.key||this.keyboardKeys.forEach((n=>{n.note===e.note&&4===n.octave&&n.press()}))}))})),window.addEventListener("keyup",(n=>{e.forEach((e=>{e.keyboardKey!==n.key||this.keyboardKeys.forEach((n=>{n.note===e.note&&4===n.octave&&n.release()}))}))}))}}(i);a.render(window.innerWidth);const s=new G;s.render(document.body),document.addEventListener("click",(t=>{if(!e){s.destroy();const e=new AudioContext,t=e.createAnalyser();t.connect(e.destination),a.initialise(e,t),new z(n,o,t).initialise()}e=!0}))}))})()})();